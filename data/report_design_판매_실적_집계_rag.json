{
  "rawResponse": "Excel 데이터를 분석하여 \"판매 실적 집계\" 레포트 화면을 설계하겠습니다.\n\n```json\n{\n  \"reportId\": \"SALE_PERFORMANCE_SUMMARY\",\n  \"reportName\": \"판매 실적 집계\",\n  \"description\": \"제품별 판매 계획 대비 실적 현황을 집계하여 보여주는 레포트\",\n  \"searchConditions\": [\n    {\n      \"field\": \"YYYYMM\",\n      \"label\": \"기준년월\",\n      \"type\": \"month\",\n      \"required\": true\n    },\n    {\n      \"field\": \"SITE\",\n      \"label\": \"SITE\",\n      \"type\": \"select\",\n      \"required\": false\n    },\n    {\n      \"field\": \"구분\",\n      \"label\": \"구분\",\n      \"type\": \"select\",\n      \"options\": [\"양산\", \"개발\", \"카세트\"],\n      \"required\": false\n    },\n    {\n      \"field\": \"거래처\",\n      \"label\": \"매출처\",\n      \"type\": \"select\",\n      \"required\": false\n    }\n  ],\n  \"gridColumns\": [\n    {\n      \"header\": \"구분\",\n      \"field\": \"division\",\n      \"width\": 80,\n      \"align\": \"center\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"코드\",\n      \"field\": \"code\",\n      \"width\": 80,\n      \"align\": \"center\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"고객코드\",\n      \"field\": \"customer_code\",\n      \"width\": 120,\n      \"align\": \"center\",\n      \"dbMapping\": {\n        \"table\": \"doi_sale_resc\",\n        \"column\": \"거래처번호\"\n      }\n    },\n    {\n      \"header\": \"매출처\",\n      \"field\": \"customer_name\",\n      \"width\": 120,\n      \"align\": \"left\",\n      \"dbMapping\": {\n        \"table\": \"doi_sale_resc\",\n        \"column\": \"거래처\"\n      }\n    },\n    {\n      \"header\": \"Inch\",\n      \"field\": \"inch\",\n      \"width\": 80,\n      \"align\": \"center\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"계획수량\",\n      \"field\": \"plan_qty\",\n      \"width\": 100,\n      \"align\": \"right\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"계획판가_$\",\n      \"field\": \"plan_price_usd\",\n      \"width\": 100,\n      \"align\": \"right\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"계획판가_₩\",\n      \"field\": \"plan_price_krw\",\n      \"width\": 100,\n      \"align\": \"right\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"계획금액\",\n      \"field\": \"plan_amount\",\n      \"width\": 120,\n      \"align\": \"right\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"실적수량\",\n      \"field\": \"actual_qty\",\n      \"width\": 100,\n      \"align\": \"right\",\n      \"dbMapping\": {\n        \"table\": \"doi_sale_resc\",\n        \"column\": \"수량\"\n      }\n    },\n    {\n      \"header\": \"실적판가_$\",\n      \"field\": \"actual_price_usd\",\n      \"width\": 100,\n      \"align\": \"right\",\n      \"dbMapping\": {\n        \"table\": \"doi_sale_resc\",\n        \"column\": \"판매단가\"\n      }\n    },\n    {\n      \"header\": \"실적판가_₩\",\n      \"field\": \"actual_price_krw\",\n      \"width\": 100,\n      \"align\": \"right\",\n      \"dbMapping\": {\n        \"table\": \"doi_sale_resc\",\n        \"column\": \"원화판매금액\"\n      }\n    },\n    {\n      \"header\": \"실적금액\",\n      \"field\": \"actual_amount\",\n      \"width\": 120,\n      \"align\": \"right\",\n      \"dbMapping\": {\n        \"table\": \"doi_sale_resc\",\n        \"column\": \"원화판매금액계\"\n      }\n    },\n    {\n      \"header\": \"대비수량\",\n      \"field\": \"compare_qty\",\n      \"width\": 100,\n      \"align\": \"right\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"대비금액\",\n      \"field\": \"compare_amount\",\n      \"width\": 120,\n      \"align\": \"right\",\n      \"dbMapping\": null\n    },\n    {\n      \"header\": \"달성률\",\n      \"field\": \"achievement_rate\",\n      \"width\": 80,\n      \"align\": \"right\",\n      \"format\": \"percent\",\n      \"dbMapping\": null\n    }\n  ],\n  \"sql\": `\n    SELECT \n        -- 구분, 코드는 별도 마스터 테이블이 필요하므로 계산 필요\n        sr.거래처번호 as customer_code,\n        sr.거래처 as customer_name,\n        -- Inch는 모델 마스터에서 조인 필요\n        SUM(sr.수량) as actual_qty,\n        AVG(sr.판매단가) as actual_price_usd,\n        AVG(sr.원화판매금액) as actual_price_krw,\n        SUM(sr.원화판매금액계) as actual_amount\n    FROM doi_sale_resc sr\n    WHERE sr.YYYYMM = :YYYYMM\n        AND (:SITE IS NULL OR sr.SITE = :SITE)\n        AND (:거래처 IS NULL OR sr.거래처 = :거래처)\n    GROUP BY sr.거래처번호, sr.거래처\n    ORDER BY sr.거래처\n  `,\n  \"dbTables\": {\n    \"main\": \"doi_sale_resc\",\n    \"related\": [\n      \"doi_model_mast\"\n    ]\n  },\n  \"unmappedColumns\": [\n    \"구분\",\n    \"코드\", \n    \"Inch\",\n    \"계획수량\",\n    \"계획판가_$\",\n    \"계획판가_₩\", \n    \"계획금액\",\n    \"대비수량\",\n    \"대비금액\",\n    \"달성률\"\n  ],\n  \"additionalNotes\": [\n    \"구분(양산/개발/카세트)과 코드는 별도의 제품 마스터 테이블이 필요합니다.\",\n    \"Inch 정보는 doi_model_mast 테이블과 조인하여 가져올 수 있습니다.\",\n    \"계획 데이터는 현재 제공된 테이블에서 확인되지 않아 별도 계획 테이블이 필요합니다.\",\n    \"달성률은 (실적금액/계획금액)*100으로 계산됩니다.\",\n    \"대비수량과 대비금액은 실적-계획으로 계산됩니다.\"\n  ]\n}\n```\n\n이 설계에서 주요 특징은:\n\n1. **매핑 가능한 컬럼**: doi_sale_resc 테이블의 거래처, 수량, 판매단가, 원화판매금액 등을 매핑\n2. **매핑 불가능한 컬럼**: 계획 데이터, 구분, 코드 등은 현재 제공된 테이블에서 확인되지 않음\n3. **추가 조인 필요**: Inch 정보를 위해 doi_model_mast 테이블과의 조인이 필요\n4. **계산 컬럼**: 달성률, 대비수량, 대비금액은 프론트엔드에서 계산 필요\n\n실제 구현 시에는 계획 데이터를 저장하는 별도 테이블이나 제품 마스터 테이블이 추가로 필요할 것으로 보입니다."
}