{
  "reportName": "모델별 생산 수불 레포트",
  "columns": [
    {
      "columnName": "모델",
      "description": "제품 모델명",
      "dataType": "string"
    },
    {
      "columnName": "입고수량",
      "description": "모델별 총 입고 수량",
      "dataType": "number"
    },
    {
      "columnName": "출고수량",
      "description": "모델별 총 출고 수량",
      "dataType": "number"
    },
    {
      "columnName": "재고수량",
      "description": "모델별 현재 재고 수량",
      "dataType": "number"
    }
  ],
  "tables": [
    "doi_prod_subul_202510",
    "doi_sale_raw"
  ],
  "sqlQuery": "WITH 입고 AS (\n  SELECT\n    \"도우모델\" AS \"모델\",\n    COUNT(*) AS \"입고수량\"\n  FROM\n    \"doi_prod_subul_202510\"\n  WHERE\n    \"작업구분\" = '입고'\n  GROUP BY\n    \"도우모델\"\n),\n출고 AS (\n  SELECT\n    \"품명\" AS \"모델\",\n    SUM(\"수량\") AS \"출고수량\"\n  FROM\n    \"doi_sale_raw\"\n  GROUP BY\n    \"품명\"\n),\n재고 AS (\n    SELECT\n        \"도우모델\" AS \"모델\",\n        COUNT(*) AS \"재고수량\"\n    FROM\n        \"doi_prod_subul_202510\"\n    WHERE \"작업구분\" = '재고'\n    GROUP BY \"도우모델\"\n)\nSELECT\n  COALESCE(입고.\"모델\", 출고.\"모델\", 재고.\"모델\") AS \"모델\",\n  COALESCE(입고.\"입고수량\", 0) AS \"입고수량\",\n  COALESCE(출고.\"출고수량\", 0) AS \"출고수량\",\n  COALESCE(재고.\"재고수량\", 0) AS \"재고수량\"\nFROM\n  입고\nFULL OUTER JOIN 출고 ON 입고.\"모델\" = 출고.\"모델\"\nFULL OUTER JOIN 재고 ON COALESCE(입고.\"모델\", 출고.\"모델\") = 재고.\"모델\"\nLIMIT 100;",
  "reasoning": "보고서에서 요청한 정보는 모델별 입고, 출고, 재고 수량입니다. 'doi_prod_subul_202510' 테이블에서 입고/재고 정보를, 'doi_sale_raw' 테이블에서 출고 정보를 가져올 수 있습니다. 따라서 두 테이블을 사용하여 필요한 정보를 집계하는 쿼리를 작성했습니다.  FULL OUTER JOIN을 사용하여 모든 모델에 대한 입고, 출고, 재고 정보를 포함하도록 했습니다. COALESCE 함수를 사용하여 NULL 값을 0으로 처리했습니다.",
  "agentThinking": "각각의 입고, 출고, 재고 테이블을 임시 테이블 (WITH 절)로 생성하여 JOIN 연산의 복잡성을 줄였습니다."
}