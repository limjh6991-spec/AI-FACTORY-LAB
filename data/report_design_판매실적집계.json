{
  "reportId": "SALE_RESULT_001",
  "reportName": "판매 실적 집계",
  "description": "제품별/고객별 판매 실적 현황 및 계획 대비 실적 분석",
  "searchConditions": [
    {
      "field": "기준년월",
      "type": "month-picker",
      "required": true,
      "defaultValue": "current_month"
    },
    {
      "field": "사이트",
      "type": "select",
      "options": [
        "전체",
        "HQ",
        "VN"
      ],
      "defaultValue": "전체"
    },
    {
      "field": "구분",
      "type": "multi-select",
      "options": [
        "전체",
        "양산",
        "개발",
        "카세트"
      ]
    },
    {
      "field": "매출처",
      "type": "select",
      "options": [
        "전체",
        "MX",
        "Global",
        "VINA",
        "기타"
      ]
    },
    {
      "field": "인치대",
      "type": "range-input",
      "placeholder": "예: 8.0 ~ 10.0"
    }
  ],
  "gridColumns": [
    {
      "header": "구분",
      "field": "sale_type",
      "width": 80,
      "align": "center",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "sale_type"
      },
      "fixed": true
    },
    {
      "header": "코드",
      "field": "product_code",
      "width": 100,
      "align": "center",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "product_code"
      }
    },
    {
      "header": "고객코드",
      "field": "customer_code",
      "width": 120,
      "align": "center",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "customer_code"
      }
    },
    {
      "header": "매출처",
      "field": "customer_name",
      "width": 100,
      "align": "center",
      "dbMapping": {
        "table": "doi_customer_mast",
        "column": "customer_name"
      }
    },
    {
      "header": "Inch",
      "field": "product_inch",
      "width": 80,
      "align": "center",
      "dbMapping": {
        "table": "doi_prod_mast",
        "column": "product_inch"
      },
      "format": "number",
      "decimal": 2
    },
    {
      "header": "계획수량",
      "field": "plan_qty",
      "width": 100,
      "align": "right",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "plan_qty"
      },
      "format": "number",
      "decimal": 0
    },
    {
      "header": "계획판가($)",
      "field": "plan_price_usd",
      "width": 100,
      "align": "right",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "plan_price_usd"
      },
      "format": "currency",
      "currency": "USD"
    },
    {
      "header": "계획판가(\\)",
      "field": "plan_price_krw",
      "width": 100,
      "align": "right",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "plan_price_krw"
      },
      "format": "currency",
      "currency": "KRW"
    },
    {
      "header": "계획금액",
      "field": "plan_amount",
      "width": 120,
      "align": "right",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "plan_amount"
      },
      "format": "currency",
      "currency": "KRW"
    },
    {
      "header": "실적수량",
      "field": "actual_qty",
      "width": 100,
      "align": "right",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "actual_qty"
      },
      "format": "number",
      "decimal": 0
    },
    {
      "header": "실적판가($)",
      "field": "actual_price_usd",
      "width": 100,
      "align": "right",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "actual_price_usd"
      },
      "format": "currency",
      "currency": "USD"
    },
    {
      "header": "실적판가(\\)",
      "field": "actual_price_krw",
      "width": 100,
      "align": "right",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "actual_price_krw"
      },
      "format": "currency",
      "currency": "KRW"
    },
    {
      "header": "실적금액",
      "field": "actual_amount",
      "width": 120,
      "align": "right",
      "dbMapping": {
        "table": "doi_sale_resc",
        "column": "actual_amount"
      },
      "format": "currency",
      "currency": "KRW"
    },
    {
      "header": "수량차이",
      "field": "qty_diff",
      "width": 100,
      "align": "right",
      "dbMapping": {
        "formula": "actual_qty - plan_qty"
      },
      "format": "number",
      "decimal": 0
    },
    {
      "header": "금액차이",
      "field": "amount_diff",
      "width": 120,
      "align": "right",
      "dbMapping": {
        "formula": "actual_amount - plan_amount"
      },
      "format": "currency",
      "currency": "KRW"
    },
    {
      "header": "달성률(%)",
      "field": "achievement_rate",
      "width": 100,
      "align": "right",
      "dbMapping": {
        "formula": "ROUND((actual_amount / NULLIF(plan_amount, 0)) * 100, 2)"
      },
      "format": "percent",
      "decimal": 2,
      "colorMapping": {
        "green": ">= 100",
        "orange": "80-99",
        "red": "< 80"
      }
    }
  ],
  "summary": {
    "type": "sum",
    "columns": [
      "plan_qty",
      "plan_amount",
      "actual_qty",
      "actual_amount",
      "qty_diff",
      "amount_diff"
    ],
    "avgColumns": [
      "achievement_rate"
    ],
    "position": "bottom"
  },
  "grouping": {
    "enabled": true,
    "defaultGroup": "sale_type",
    "options": [
      "sale_type",
      "customer_name",
      "product_inch"
    ]
  },
  "export": {
    "excel": true,
    "pdf": true,
    "formats": [
      "xlsx",
      "pdf"
    ]
  },
  "sql": "SELECT s.sale_type, s.product_code, s.customer_code, c.customer_name, p.product_inch, s.plan_qty, s.plan_price_usd, s.plan_price_krw, s.plan_amount, s.actual_qty, s.actual_price_usd, s.actual_price_krw, s.actual_amount, (s.actual_qty - s.plan_qty) as qty_diff, (s.actual_amount - s.plan_amount) as amount_diff, ROUND((s.actual_amount / NULLIF(s.plan_amount, 0)) * 100, 2) as achievement_rate FROM doi_sale_resc s LEFT JOIN doi_customer_mast c ON s.customer_code = c.customer_code LEFT JOIN doi_prod_mast p ON s.product_code = p.product_code WHERE s.base_yyyymm = :base_yyyymm AND (:site_code = '전체' OR s.site_code = :site_code) AND (:sale_type = '전체' OR s.sale_type IN (:sale_type)) AND (:customer_name = '전체' OR c.customer_name = :customer_name) AND (:inch_from IS NULL OR p.product_inch >= :inch_from) AND (:inch_to IS NULL OR p.product_inch <= :inch_to) ORDER BY s.sale_type, s.product_code",
  "dbTables": {
    "main": "doi_sale_resc",
    "related": [
      {
        "table": "doi_customer_mast",
        "join": "LEFT JOIN doi_customer_mast c ON s.customer_code = c.customer_code"
      },
      {
        "table": "doi_prod_mast",
        "join": "LEFT JOIN doi_prod_mast p ON s.product_code = p.product_code"
      }
    ]
  },
  "features": {
    "pagination": true,
    "sorting": true,
    "filtering": true,
    "columnResize": true,
    "columnHide": true,
    "excelExport": true,
    "printView": true
  }
}